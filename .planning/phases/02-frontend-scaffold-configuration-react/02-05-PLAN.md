---
phase: 02-frontend-scaffold-configuration-react
plan: 05
type: execute
wave: 1
depends_on: []
files_modified:
  - apps/frontend/src/components/WizardNav.tsx
  - apps/frontend/src/features/upload/UploadStep.tsx
  - apps/frontend/src/features/configure/ConfigureStep.tsx
  - apps/frontend/src/features/results/ResultsStep.tsx
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "A sticky floating navigation bar appears at the bottom of the viewport on all wizard steps that have navigation buttons"
    - "The sticky nav contains Back and/or Next buttons matching the step's current actions"
    - "The inline bottom buttons inside step content are removed to avoid duplication"
    - "The sticky nav does not appear on the Processing step (no user navigation during processing)"
  artifacts:
    - path: "apps/frontend/src/components/WizardNav.tsx"
      provides: "Reusable sticky bottom navigation bar for wizard steps"
      contains: "fixed bottom-0"
    - path: "apps/frontend/src/features/upload/UploadStep.tsx"
      provides: "Upload step with WizardNav instead of inline button"
    - path: "apps/frontend/src/features/configure/ConfigureStep.tsx"
      provides: "Configure step with WizardNav instead of inline buttons"
  key_links: []
---

<objective>
Create a sticky floating wizard navigation bar so proceed/back buttons are always visible.

Purpose: UAT user feedback — users have to scroll to find proceed/back buttons on long pages. A sticky bottom nav bar keeps navigation always accessible without scrolling.

Output: WizardNav component that sticks to the bottom of the main content area, used by Upload, Configure, and Results steps. Processing step excluded (no navigation during processing).
</objective>

<execution_context>
@/Users/martinhess/.claude/get-shit-done/workflows/execute-plan.md
@/Users/martinhess/.claude/get-shit-done/templates/summary.md
@/Users/martinhess/.claude/get-shit-done/references/ui-brand.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-frontend-scaffold-configuration-react/02-UAT.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create WizardNav sticky navigation component</name>
  <files>
    apps/frontend/src/components/WizardNav.tsx
  </files>
  <action>
Create a new `WizardNav` component that renders a sticky bottom navigation bar within the main content area.

**Design:**
- Position: `sticky bottom-0` within the main scrollable area (not fixed to viewport — it should sit above the Footer)
- Background: `bg-parchment` with top border `border-t border-parchment-dark/40` — matches the existing theme
- Layout: flex row with `justify-between`, padded `px-6 py-3`
- Full width within the main content column, `max-w-6xl mx-auto` to match content width
- z-index: `z-10` (below footer's z-20)
- Subtle shadow: `shadow-[0_-2px_8px_rgba(0,0,0,0.06)]` to visually lift it above content

**Props interface:**
```tsx
interface WizardNavProps {
  back?: {
    label: string;
    onClick: () => void;
    disabled?: boolean;
    icon?: React.ReactNode;
  };
  next?: {
    label: string;
    onClick: () => void;
    disabled?: boolean;
    loading?: boolean;
    icon?: React.ReactNode;
  };
}
```

**Button styles:**
- Back button (left): ghost style — `text-archive-ink/60 hover:text-archive-sepia hover:bg-parchment-dark/10` with ArrowLeft icon
- Next button (right): primary style — same as existing proceed buttons `bg-archive-sepia text-parchment-light shadow-lg hover:bg-archive-sepia/90` when enabled, `bg-parchment-dark/30 text-archive-ink/20 cursor-not-allowed` when disabled
- Both: `font-serif text-lg px-6 py-2.5 rounded transition-all flex items-center gap-2`
- Loading state: Loader2 spinner replacing the icon

If only `back` is provided, render it on the left with empty right side. If only `next`, render it on the right. If both, render back-left and next-right.
  </action>
  <verify>
1. Read WizardNav.tsx and confirm:
   - Sticky positioning within content area
   - Props interface matches spec
   - Back (ghost) and Next (primary) button styling
   - Loading state support on Next button
  </verify>
  <done>
WizardNav component created with sticky bottom positioning and themed back/next buttons.
  </done>
</task>

<task type="auto">
  <name>Task 2: Replace inline navigation buttons with WizardNav in all steps</name>
  <files>
    apps/frontend/src/features/upload/UploadStep.tsx
    apps/frontend/src/features/configure/ConfigureStep.tsx
    apps/frontend/src/features/results/ResultsStep.tsx
  </files>
  <action>
**UploadStep.tsx:**
- Remove the entire bottom `<div className="flex justify-end pt-4 border-t ...">` block containing the "Proceed to Configuration" button
- Import WizardNav and add it as the LAST child of the root div:
  ```tsx
  <WizardNav
    next={{
      label: 'Proceed to Configuration',
      onClick: handleNext,
      disabled: files.length === 0,
      icon: <ArrowRight className="w-5 h-5" />,
    }}
  />
  ```
- Keep the existing `handleNext` function unchanged

**ConfigureStep.tsx:**
- Remove the entire bottom `<div className="flex justify-between pt-4 border-t ...">` block containing "Return to Staging" and "Commence Processing" buttons
- Import WizardNav and add it as the LAST child of the root div:
  ```tsx
  <WizardNav
    back={{
      label: 'Return to Staging',
      onClick: handleBack,
      disabled: isPending,
    }}
    next={{
      label: 'Commence Processing',
      onClick: handleStartExtraction,
      disabled: fields.length === 0 || isPending || !batchName.trim(),
      loading: isPending,
      icon: <Play className="w-5 h-5 fill-current" />,
    }}
  />
  ```
- Keep existing handler functions unchanged. Remove unused ArrowLeft import if WizardNav handles its own icon.

**ResultsStep.tsx:**
- Remove the bottom "Start New Batch" button div
- Import WizardNav and add it as the LAST child of the root return div:
  ```tsx
  <WizardNav
    next={{
      label: 'Start New Batch',
      onClick: handleStartNewBatch,
      icon: <RefreshCcw className="w-5 h-5" />,
    }}
  />
  ```

**ProcessingStep.tsx — NO CHANGES.** Processing step has no forward/back navigation (only cancel and return-to-configure on catastrophic failure, which are contextual to that view).
  </action>
  <verify>
1. Read UploadStep.tsx — no inline bottom button div, WizardNav present
2. Read ConfigureStep.tsx — no inline bottom button div, WizardNav with back+next
3. Read ResultsStep.tsx — no inline bottom "Start New Batch" div, WizardNav present
4. Read ProcessingStep.tsx — unchanged (no WizardNav)
  </verify>
  <done>
All wizard steps use the sticky WizardNav component, replacing inline buttons. Navigation is always visible without scrolling.
  </done>
</task>

</tasks>

<verification>
- WizardNav.tsx exists with sticky bottom positioning and themed buttons
- UploadStep renders WizardNav with next-only
- ConfigureStep renders WizardNav with back + next
- ResultsStep renders WizardNav with next-only (Start New Batch)
- ProcessingStep is unchanged
- No duplicate navigation buttons in any step
</verification>

<success_criteria>
Users always see navigation buttons without scrolling. The sticky nav bar is visually consistent with the parchment theme and provides clear back/next actions on every applicable wizard step.
</success_criteria>

<output>
After completion, create `.planning/phases/02-frontend-scaffold-configuration-react/02-05-SUMMARY.md`
</output>
