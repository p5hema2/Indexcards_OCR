---
phase: 02-frontend-scaffold-configuration-react
plan: 04
type: execute
wave: 1
depends_on: []
files_modified:
  - apps/frontend/src/components/Sidebar.tsx
  - apps/frontend/src/store/wizardStore.ts
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "Completed wizard steps in the sidebar are clickable and navigate back to that step"
    - "Forward navigation past the current step is not allowed via sidebar clicks"
    - "Processing and results steps are never navigable via sidebar (only reachable through the wizard flow)"
    - "Active and pending steps are not clickable"
  artifacts:
    - path: "apps/frontend/src/components/Sidebar.tsx"
      provides: "Clickable completed steps for back-navigation"
      contains: "onClick handler that calls setStep for completed steps"
    - path: "apps/frontend/src/store/wizardStore.ts"
      provides: "canNavigateToStep guard function"
  key_links: []
---

<objective>
Enable back-navigation to completed wizard steps via sidebar clicks.

Purpose: UAT user feedback — users cannot go back to fix mistakes (upload more files, fix field config typos). Completed steps should be clickable in the sidebar to return to them. Forward navigation past current step remains blocked to enforce wizard order.

Output: Sidebar completed steps are clickable; clicking navigates back to that step while preserving all wizard state.
</objective>

<execution_context>
@/Users/martinhess/.claude/get-shit-done/workflows/execute-plan.md
@/Users/martinhess/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-frontend-scaffold-configuration-react/02-UAT.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Make completed sidebar steps clickable for back-navigation</name>
  <files>
    apps/frontend/src/components/Sidebar.tsx
    apps/frontend/src/store/wizardStore.ts
  </files>
  <action>
**Sidebar.tsx changes:**

1. Make completed step items clickable. In the STEPS.map() render block, wrap completed steps with an onClick handler that calls `setStep(step.key)`:
   - Add `const setStep = useWizardStore((state) => state.setStep);` to the component
   - For each step item, if `status === 'complete'`, add `onClick={() => setStep(step.key)}` and `cursor-pointer hover:bg-parchment-dark/40` classes
   - For `active` and `pending` steps, keep them non-clickable (no onClick, `cursor-default`)

2. Add a subtle hover effect for completed steps to signal interactivity — e.g. `hover:bg-parchment-dark/40` and `cursor-pointer`

3. Navigation guard: Only allow clicking back to 'upload' or 'configure' steps. Never allow sidebar click to 'processing' or 'results' — those are only reachable through the wizard flow (starting a batch, or batch completion). Add this guard in the onClick:
   ```
   const handleStepClick = (stepKey: WizardStep) => {
     // Only allow navigating back to upload or configure
     if (stepKey === 'processing' || stepKey === 'results') return;
     const status = getStepStatus(stepKey);
     if (status === 'complete') {
       setStep(stepKey);
     }
   };
   ```

**wizardStore.ts** — no changes needed. `setStep` already exists and works for any step. The guard logic lives in the Sidebar component.
  </action>
  <verify>
1. Read Sidebar.tsx and confirm:
   - `setStep` is imported from the store
   - Completed steps have onClick + cursor-pointer
   - `handleStepClick` guards against navigating to processing/results
   - Active and pending steps have no onClick
  </verify>
  <done>
Completed wizard steps are clickable in the sidebar for back-navigation while preserving wizard order enforcement.
  </done>
</task>

</tasks>

<verification>
- Completed steps in sidebar have onClick handlers and hover state
- Clicking a completed step calls setStep() to navigate back
- Processing and results steps are never clickable via sidebar
- Active and pending steps remain non-interactive
</verification>

<success_criteria>
Users can click completed sidebar steps to go back and fix mistakes (upload more files, edit field config), then proceed forward again through the wizard.
</success_criteria>

<output>
After completion, create `.planning/phases/02-frontend-scaffold-configuration-react/02-04-SUMMARY.md`
</output>
